# SQL

## MySql优化方案

> 考量方面：
>
> 1、Sql语句的优化，主要是索引问题
>
> 2、MySql架构设计层面的优化
>
> 3、就是他不适合用MySql，可以采用一些缓存或是其他中间件做数据的存储

**Sql语句的优化**

基于慢查询日志，找到慢查询Sql，然后可以基于explain去分析这个sql语句的执行情况，让每次查询都可以命中索引，从而避免全盘扫描，从而提升查询效率

**架构层面** 

可以做一些表设计层面以及分库分表的一些事情，比如字段都尽量做一些非空约束，数据类型选型，数据量大于500w条时考虑做分库分表操作，做读写分离，将热点数据做缓存



## MySql和Elasticsearch同步数据的fangan



# Spring

## SpringBoot的自动装配

> 考量：
>
> 1、约定大于配置
>
> 2、如何实现自动装配

SpringBoot会导入一些starter的jar包，其内部会提供一些AutoConfigure的依赖，而这些依赖的内部会有一个META-INF下的Spring.factories文件，而在这些文件中会为咱们提供一些提取编写好的配置类；

其次我们需要清楚Spring在启动时，是如何加载到这个文件中的类的：

​	第一点：Spring的启动类的注解叫做SpringBootApplication，这是一个组合注解，在这个注解内部包含了一个叫做EnableAutoConfiguration的注解，这也是一个组合注解，在其内部又会导入一个叫做@Import的注解，在这个注解内部，他会导入一个叫做AutoConfigurationImportSelector的类，而在这个类内部，它就会基于SpringFactoriesLoader去执行它的loadFactoryNames，它去加载第三方配置了，在这个方法内部，loadSpringFactories就会加载到META-INF下的spring.factories文件l，这样一来，就读取到了内部的AutoConfigure类，实现自动装配。